<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["python"]);
        });
      </script>
  </head>

  <body class="index">
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search">
        </div>
        <div class="search-info"></div>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.arbiter.me/dashboard/' target='_blank'>Login to your Developer Dashboard</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="classes">Classes</h1>

<p>Arbiter makes it easy for you to have your players betting against each other for Bitcoin in your games safely and legally. Before writing any code, get familiar with the primary classes that you will interact with when building your games.</p>

<h2 id="jackpot">Jackpot</h2>

<p>Arbiter <code class="prettyprint">Jackpots</code> are similar to a pot at a poker table. Your server will request new jackpots for each competition between your players in your game. Once a jackpot has been created, your players will have to opportunity to buy-in to the jackpot. After your players have finished battling it out in your game, you tell us who won. Arbiter will release the funds in the jackpot to the winner.</p>

<h2 id="user">User</h2>

<p>Your players&#39; devices interact directly with our server. The first time a player&rsquo;s device connects with Arbiter, we create an anonymous <code class="prettyprint">User</code> and return a unique ID for that user. This ID is what you will use to make requests on that user&rsquo;s behalf in the future from your server. By default, all users are playing anonymously. At any point, they can create login credentials for their account to log back in once their session expires.</p>

<h2 id="wallet">Wallet</h2>

<p>Each Arbiter <code class="prettyprint">User</code> is given an Arbiter <code class="prettyprint">Wallet</code>. This request will occur directly between your players&#39; device and the Arbiter server. When a player requests a wallet, Arbiter returns a deposit address to the user&rsquo;s device. The user can then deposit Bitcoin directly to that address using their prefered Bitcoin wallet. We suggest using Coinbase. Deposits made using Coinbase will register in the user&rsquo;s wallets nearly instantly.</p>

<p>At any point, a user can make a withdraw from their Arbiter Wallet back to any Bitcoin address. Once a user has withdrawn once, we save that address so withdraws in the future are very easy.</p>

<h1 id="laws-and-regulations">Laws and Regulations</h1>

<p>Every developer we have talked with starts off with the same question, <strong>&ldquo;Isn&rsquo;t gambling online illegal in the US?&rdquo;</strong></p>

<p>When we first started working on Arbiter, we noticed a few complicated and/or vague laws around defining what is or is not gambling. These laws differ state by state and are constantly evolving. The caveat that all online betting platforms for games have caught onto is, <strong>&ldquo;A game where the outcome is determined predominately by skill is not considered gambling in most states.&rdquo;</strong></p>

<p>We have built a unique piece of technology capable of defining the amount of skill involved in the outcomes of your games. We can put a number to how predominately skill is determining the outcome of your game. We follow that up with how much skill is required by each state to not be considered gambling. Before a player can ever deposit funds into an Arbiter wallet, we verify the user&rsquo;s local regulation does not conflict with your game&rsquo;s amount of skill vs chance in the outcome. <strong>You can make your game and distribute it to your standard distribution channels. We&rsquo;ll make decisions based on your game&rsquo;s predominance rating and the local regulation of each player to get your games in front of the maximum number of players with no manual effort on your end.</strong></p>

<h1 id="getting-started">Getting Started</h1>

<p>Before digging into the details below, spend 2 minutes reading the <a href="/#classes">Classes</a> section. It will get you familiar with the core classes you will be interacting with.</p>

<h2 id="configure-your-game">Configure Your Game</h2>

<p><a href="https://www.arbiter.me/developer-registration/">Create an Arbiter developer account</a> to configure your game and save  your API Key.</p>

<p>Configuring your game
In your dashboard, click the &lsquo;Register new game&rsquo; button in the games tab.</p>

<h3 id="game-configuration-form">Game Configuration Form</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Name</td>
<td>A label for your game.</td>
</tr>
<tr>
<td>Rake amount</td>
<td>The percentage of each player payout you want to charge. Valid range is 0 through 99. <code class="prettyprint">payout = balance - your rake % - Arbiter fee (5%)</code>.</td>
</tr>
</tbody></table>

<p>Once you have saved the configuration form, an API key will be generated for your game upon completing registration. Store this on your server for making authenticated calls. See TODO for more on how this key will be used.</p>

<h1 id="api-reference">API Reference</h1>

<h2 id="response-objects">Response Objects</h2>
<pre class="highlight python">
<span class="c"># Example response from https://www.arbiter.me/api/v1/wallet/</span>
<span class="p">{</span>
    <span class="s">"success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">"wallet"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"deposit_address"</span><span class="p">:</span> <span class="s">"1Mdx1V81LJeyZk6yBizRny6KXxyMTXHGpw"</span><span class="p">,</span>
        <span class="s">"balance"</span><span class="p">:</span> <span class="s">"0"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>All APIs return json with the following keys:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>Boolean</td>
<td>Whether or not the requested action was performed.</td>
</tr>
<tr>
<td>OBJECT</td>
<td>dictionary</td>
<td>A dictionary containing the relavant object being queried or edited. This key will be the name of object type (ie: user, wallet, jackpot, etc).</td>
</tr>
<tr>
<td>errors</td>
<td>array</td>
<td>An array of errors (if any errors occurred).</td>
</tr>
</tbody></table>

<h2 id="initialize">Initialize</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.arbiter.me/api/v1/user/initialize'</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">"success"</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">"user"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"id"</span><span class="p">:</span> <span class="s">"d8b50f95c8a24f24a7c64c9d3d5dde5f"</span><span class="p">,</span>
        <span class="s">"token"</span><span class="p">:</span> <span class="s">"3d2fcd21dcd22ae1d64b799c486a959aeee42fbb"</span><span class="p">,</span>
        <span class="s">"claim_account_url"</span><span class="p">:</span> <span class="s">"https://www.arbiter.me/api/v1/user/40628a4750f74b7a9e1827812e7af815/f80819ef573f699c2723b0c15f1c24bf704ae8a5ef5363083434831bed36c518"</span><span class="p">,</span>
        <span class="s">"is_verified"</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s">"username"</span><span class="p">:</span> <span class="s">"anonymous"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>The initialize call should be made at the beginning of every user&rsquo;s session in your game. Arbiter creates an anonymous session with the user. The session is managed through the <code class="prettyprint">token</code> returned in the first response.</p>

<p>Future requests made for this user require the <code class="prettyprint">token</code> in the request headers. Store the user.id and user.token in your database or locally on the device for future requests.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://www.arbiter.me/api/v1/user/initialize</code></p>

<h3 id="returned-user-object">Returned User Object</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique Arbiter ID for this user. Save this in your DB for requests involving this users</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>Authentication token for this user. Save this in your DB and keep it private. This will be included in request headers in future requests to authenticate a request made on behalf of this user.</td>
</tr>
<tr>
<td>is_verified</td>
<td>boolean</td>
<td>Whether or not this user has agreed to Arbiter&rsquo;s Terms of Service.</td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>Display name of this user. If they have not created an account using the claim_url, this will be <code class="prettyprint">anonymous</code></td>
</tr>
<tr>
<td>claim_account_url</td>
<td>string</td>
<td>A unique URL for this user to claim their Arbiter Account. Once they have claimed their account, they can login to their <a href="https://www.arbiter.me/dashboard/">Player Dashboard</a>. They can also use their account credentials to login to an Arbiter enabled game and have access to their existing wallet created in a previous session.</td>
</tr>
</tbody></table>

<h2 id="agree-to-terms-of-service">Agree to Terms of Service</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># id and token returned from the /user/initialize call</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span>
<span class="n">user_token</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># Game API Key from your developer dashboard</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/user/'</span> <span class="o">+</span> <span class="n">user_id</span> <span class="o">+</span> <span class="s">'/verify'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">user_token</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">api_key</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">success</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>
</pre>

<p>Before a user can participate in a wager, we need to confirm that the user is over 18, their local jurisdiction allows skill based betting online, and they need to agree to the <a href="https://www.arbiter.me/terms/">Arbiter Terms of Service</a>. Display the exact text below with a confirmation button that posts to the the confirmation API.</p>

<p><aside class="notice">
    By clicking the confirmation button below, you agreeing to the <a href="https://www.arbiter.me/terms/">Arbiter Terms of Service</a> and confirming that you are at least 18 years of age.
</aside></p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://www.arbiter.me/api/v1/user/&lt;USER ID&gt;/verify</code></p>

<h3 id="returns">Returns</h3>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>Whether or not the user&rsquo;s account was successfully verified</td>
</tr>
</tbody></table>

<h2 id="query-user">Query User</h2>

<h2 id="query-wallet">Query Wallet</h2>

<h2 id="deposit">Deposit</h2>

<h2 id="request-jackpot">Request Jackpot</h2>

<h2 id="place-bet">Place Bet</h2>

<h2 id="report-score">Report Score</h2>

<h2 id="cash-out">Cash Out</h2>

<h1 id="unity-sdk">Unity SDK</h1>

<p>TODO: Flush out SDK documentation</p>

<h2 id="initialize">Initialize</h2>

<h2 id="query-user">Query User</h2>

<h2 id="query-wallet">Query Wallet</h2>

<h2 id="deposit">Deposit</h2>

<h2 id="request-jackpot">Request Jackpot</h2>

<h2 id="place-bet">Place Bet</h2>

<h2 id="report-score">Report Score</h2>

<h2 id="query-jackpot">Query Jackpot</h2>

<h2 id="cash-out">Cash Out</h2>

          <h1 id="errors">Errors</h1>

<p><aside class="notice">This error section is stored in a separate file in <code class="prettyprint">includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the <code class="prettyprint">includes</code> folder and add them to the top of your <code class="prettyprint">index.md</code>&rsquo;s frontmatter. Files are included in the order listed.</aside></p>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slown down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div id="lang-selector">
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
