<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <title>Arbiter Documentation</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["python","csharp"]);
        });
      </script>
  </head>

  <body class="index">
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search">
        </div>
        <div class="search-info"></div>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.arbiter.me/dashboard/' target='_blank'>Login to your Developer Dashboard</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>

      <div class="content">
        <h1 id="getting-started">Getting Started</h1>

<h2 id="core-classes">Core Classes</h2>

<p>Arbiter has 3 core classes that you will interact with as you develop your game. This 2-minute overview of the classes will help you understand what code you&rsquo;ll need to write!</p>

<h3 id="user">User</h3>
<pre class="highlight python"><span class="c"># Example User</span>
<span class="s">'user'</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span>
    <span class="s">'token'</span><span class="p">:</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span><span class="p">,</span>
    <span class="s">'claim_account_url'</span><span class="p">:</span> <span class="s">'https://www.arbiter.me/api/v1/user/40628a4750f74b7a9e1827812e7af815/f80819ef573f699c2723b0c15f1c24bf704ae8a5ef5363083434831bed36c518'</span><span class="p">,</span>
    <span class="s">'is_verified'</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
    <span class="s">'username'</span><span class="p">:</span> <span class="s">'anonymous'</span>
<span class="p">}</span>
</pre>

<p>Your users&#39; devices interact directly with our server. The first time a player&rsquo;s device connects with Arbiter, we create an anonymous <code class="prettyprint">User</code> and return a unique ID for that user. This ID is what you will use to make requests on that user&rsquo;s behalf in the future from your server. By default, all users are playing anonymously. At any point, they can create login credentials for their account to log back in with those credentials using our Login API.</p>

<h3 id="wallet">Wallet</h3>
<pre class="highlight python"><span class="c"># Example Wallet</span>
<span class="s">'wallet'</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">'deposit_address'</span><span class="p">:</span> <span class="s">'1JbbREwe8Vb9DAVzB2zWtNYvKDYLyjyV3C'</span><span class="p">,</span>
    <span class="s">'balance'</span><span class="p">:</span> <span class="s">'50'</span><span class="p">,</span>
    <span class="s">'pending_balance'</span><span class="p">:</span> <span class="s">'623'</span>
<span class="p">}</span>
</pre>

<p>Each Arbiter <code class="prettyprint">User</code> is given an Arbiter <code class="prettyprint">Wallet</code>. This request will occur directly between your players&#39; device and the Arbiter server. The user can then deposit to this wallet using a Credit Card, PayPal, or with Bitcoin. At any point, a user can make a withdrawal from their Arbiter Wallet back to any Debit Card, PayPal account, or Bitcoin address.</p>

<h3 id="tournament">Tournament</h3>
<pre class="highlight python"><span class="c"># Example Tournament</span>
<span class="s">'tournament'</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
    <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
    <span class="s">'balance'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
    <span class="s">'users'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}],</span>
<span class="p">}</span>
</pre>

<p>Tournaments are the core class handling all the betting interactions between your players. Your server will create a new <code class="prettyprint">Tournament</code> for each betting interaction between the players in your game. Once a <code class="prettyprint">Tournament</code> has been created, your users will be able to buy in to the <code class="prettyprint">Tournament</code>. After your users have finished battling it out in your game, your server will report who won. Arbiter will then charge a transacaction fee (some for us, and some for you) and then release the remaining funds in the <code class="prettyprint">Tournament</code> to the winning user&rsquo;s Arbiter <code class="prettyprint">Wallet</code>.</p>

<h2 id="no-backend-required">No backend required</h2>

<p>Arbiter is flexible enough to work with multiple patterns</p>

<h2 id="restful">RESTful</h2>

<p>The Arbiter API follows RESTful patterns, returns consistent JSON structures in every response, and relies on built-in HTTP features. As long as you are familiar with the standard HTTP features, the API should behave straight forward.</p>

<h2 id="http-status-codes">HTTP Status Codes</h2>

<p>Our API uses HTTP status codes to help you track down an issue if the API is not working as you would expect.</p>

<table><thead>
<tr>
<th>Code</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">200</code></td>
<td>OK</td>
<td>The requested action was successful.</td>
</tr>
<tr>
<td><code class="prettyprint">400</code></td>
<td>Bad Request</td>
<td>A required parameter was missing or invalid.</td>
</tr>
<tr>
<td><code class="prettyprint">401</code></td>
<td>Unauthorized</td>
<td>Missing or invalid access token in your Authorization Header.</td>
</tr>
<tr>
<td><code class="prettyprint">404</code></td>
<td>Not Found</td>
<td>Incorrect url or ID in a url.</td>
</tr>
<tr>
<td><code class="prettyprint">500</code></td>
<td>Server Error</td>
<td>Something went wrong on our end. We get notified every single time you see this and are looking into what caused the problem.</td>
</tr>
</tbody></table>

<h2 id="response-objects">Response Objects</h2>
<pre class="highlight python"><span class="c"># Example response from https://www.arbiter.me/api/v1/wallet/</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">'wallet'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'deposit_address'</span><span class="p">:</span> <span class="s">'1Mdx1V81LJeyZk6yBizRny6KXxyMTXHGpw'</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'0'</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>All APIs return json with the following keys:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>Boolean</td>
<td>Whether or not the requested action was performed.</td>
</tr>
<tr>
<td>OBJECT_NAME</td>
<td>dictionary</td>
<td>A dictionary containing the relavant object being queried or edited. This key will be the name of object type (ie: user, wallet, tournament, etc).</td>
</tr>
<tr>
<td>errors</td>
<td>array</td>
<td>An array of errors (if any errors occurred).</td>
</tr>
</tbody></table>

<p>Before digging into the details below, spend 2 minutes reading the <a href="/?python#core-classes">Core Classes</a> section. It will get you familiar with the core classes you will be interacting with.</p>

<h2 id="authentication">Authentication</h2>
<pre class="highlight python"><span class="c"># Example request with Authorization Header</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">USER_TOKEN</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>
<span class="n">GAME_API_KEY</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span><span class="o">+</span><span class="n">USER_TOKEN</span><span class="o">+</span><span class="s">'::'</span><span class="o">+</span><span class="n">GAME_API_KEY</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://www.arbiter.me/api/v1/user/details'</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</pre>

<p>Authentication with Arbiter is two fold. Both your server and your users need the ability to make authenticated requests to Arbiter. To do so, all requests include both a game API key and a user token.</p>

<h3 id="game-api-key">Game API Key</h3>

<p>When you create a game using the <a href="#configure-your-game">Game Configuration Form</a>, an API key is generated for that game. This key is required for all requests to identify which game the requests are for.</p>

<h3 id="developer-access-token">Developer Access Token</h3>

<p>For request made between your server and Arbiter, your developer access token is required to authorize your access to the API. Your developer access token is available in your <a href="https://www.arbiter.me/dashboard/settings/">Account Settings</a>.</p>

<h3 id="user-access-token">User Access Token</h3>

<p>The user token is used the same as your Developer Access Token except to authenticate your users&#39; requests between their devices and the Arbiter server. User tokens are returned in the <a href="#initialize">User Initialize</a> and <a href="#details">User Details</a> responses. Once a user has been queried, save their token in their client for future requests.</p>

<p><aside class="warning">
    If you decide to save user tokens in your database, be sure you are sending the tokens using SSL and encrypting your database fields.
</aside></p>

<p>Once you have all your keys and tokens and are ready to make a request, you&rsquo;ll combine them into a single field in the Authorization Header of your requests.</p>
<pre class="highlight python"><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token &lt;ACCESS_TOKEN&gt;::&lt;GAME_API_KEY&gt;'</span>
<span class="p">}</span>
</pre>

<p>The format of the header is &lsquo;Token <code class="prettyprint">ACCESS_TOKEN</code>::<code class="prettyprint">GAME_API_KEY</code>&rsquo;. Depending on whether your server is making the request or if the request is coming from a user&rsquo;s client, the <code class="prettyprint">ACCESS_TOKEN</code> should be either your <code class="prettyprint">Developer Access Token</code> or the <code class="prettyprint">USER ACCESS TOKEN</code>.</p>

<h2 id="configure-your-game">Configure Your Game</h2>

<p><a href="https://www.arbiter.me/developer-registration/">Create an Arbiter developer account</a> to configure your game and save  your API Key.</p>

<p>Configuring your game
In your dashboard, click the &lsquo;Register new game&rsquo; button in the games tab.</p>

<h3 id="game-configuration-form">Game Configuration Form</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>A label for your game.</td>
</tr>
<tr>
<td>rake amount</td>
<td>The percentage of each player payout you want to charge. Valid range is 0 through 99. <code class="prettyprint">payout = balance - your rake % - Arbiter fee (5%)</code>.</td>
</tr>
<tr>
<td>matchmaking</td>
<td>Will this game use Arbiter&rsquo;s Matchmaking service to find similar skilled challengers when a user requests a match?</td>
</tr>
</tbody></table>

<p>Once you have saved the configuration form, an API key will be generated for your game. Store this on your server for making authenticated calls. See <a href="#authentication">Authentication</a> for more on how to make authenticated requests.</p>

<h1 id="user-api">User API</h1>

<h2 id="initialize">Initialize</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.arbiter.me/api/v1/user/initialize'</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">'user'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span>
        <span class="s">'token'</span><span class="p">:</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span><span class="p">,</span>
        <span class="s">'claim_account_url'</span><span class="p">:</span> <span class="s">'https://www.arbiter.me/api/v1/user/40628a4750f74b7a9e1827812e7af815/f80819ef573f699c2723b0c15f1c24bf704ae8a5ef5363083434831bed36c518'</span><span class="p">,</span>
        <span class="s">'is_verified'</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s">'username'</span><span class="p">:</span> <span class="s">'anonymous'</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>The initialize call should be made at the beginning of every user&rsquo;s session in your game. Arbiter creates an anonymous session for the user. The session is managed through the <code class="prettyprint">token</code> returned in the first response.</p>

<p>Future requests made for this user require the <code class="prettyprint">token</code> in the request headers. Store the user.id and user.token in your database or locally on the device for future requests.</p>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">GET https://www.arbiter.me/api/v1/user/initialize</code></p>

<h3 id="returned-user-object">Returned User Object</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique Arbiter ID for this user. Save this in your DB for requests involving this users</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>Authentication token for this user. Save this in your DB and keep it private. This will be included in request headers in future requests to authenticate a request made on behalf of this user.</td>
</tr>
<tr>
<td>is_verified</td>
<td>boolean</td>
<td>Whether or not this user has agreed to Arbiter&rsquo;s Terms of Service.</td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>Display name of this user. If they have not created an account using the claim_url, this will be anonymous</td>
</tr>
<tr>
<td>claim_account_url</td>
<td>string</td>
<td>A unique URL for this user to claim their Arbiter Account. Once they have claimed their account, they can login to their <a href="https://www.arbiter.me/dashboard/">Player Dashboard</a>. They can also use their account credentials to login to an Arbiter enabled game and have access to their existing wallet created in a previous session.</td>
</tr>
</tbody></table>

<h2 id="agree-to-terms-of-service">Agree to Terms of Service</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># id and token returned from the /user/initialize call</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span>
<span class="n">user_token</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># Game API Key from your developer dashboard</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/user/'</span> <span class="o">+</span> <span class="n">user_id</span> <span class="o">+</span> <span class="s">'/verify'</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">user_token</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">api_key</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">success</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>
</pre>

<p>Before a user can participate in a wager, we need to confirm that the user is over 18, their local jurisdiction allows skill based betting online, and they need to agree to the <a href="https://www.arbiter.me/terms/">Arbiter Terms of Service</a>. Display the exact text below with a confirmation button that posts to the the confirmation API.</p>

<p><aside class='notice'>
    By clicking the confirmation button below, you agreeing to the <a href="https://www.arbiter.me/terms/">Arbiter Terms of Service</a> and confirming that you are at least 18 years of age.
</aside></p>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">POST https://www.arbiter.me/api/v1/user/&lt;USER ID&gt;/verify</code></p>

<h3 id="returns">Returns</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>success</td>
<td>boolean</td>
<td>Whether or not the user&rsquo;s account was successfully verified</td>
</tr>
</tbody></table>

<h2 id="details">Details</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># id and token returned from the user/initialize or user/login call</span>
<span class="c"># IMPORTANT: Keep your users' tokens private</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span>
<span class="n">user_token</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># game API Key from your developer dashboard</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">user_token</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">api_key</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/user/'</span> <span class="o">+</span> <span class="n">user_id</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">'user'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span>
        <span class="s">'is_verified'</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="s">'username'</span><span class="p">:</span> <span class="s">'anonymous'</span><span class="p">,</span>
        <span class="s">'token'</span><span class="p">:</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>
    <span class="p">},</span>
    <span class="s">'wallet'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'deposit_address'</span><span class="p">:</span> <span class="s">'1JbbREwe8Vb9DAVzB2zWtNYvKDYLyjyV3C'</span><span class="p">,</span>
        <span class="s">'deposit_address_qr_code'</span><span class="p">:</span> <span class="s">'https://chart.googleapis.com/chart?cht=qr&amp;chl=bitcoin</span><span class="si">%3</span><span class="s">A1JbbREwe8Vb9DAVzB2zWtNYvKDYLyjyV3C&amp;choe=UTF-8&amp;chs=300x300'</span><span class="p">,</span>
        <span class="s">'withdraw_address'</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'50'</span><span class="p">,</span>
        <span class="s">'pending_balance'</span><span class="p">:</span> <span class="s">'623'</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre>

<p>Returns details for a user.</p>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">GET https://www.arbiter.me/api/v1/user/&lt;USER ID&gt;</code></p>

<h3 id="returns-a-user&#39;s-details">Returns a User&rsquo;s details</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique ID for this user. Save this ID with the user in your database.</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>Access token used for authentication. Store this in your database with the user and keep it secret.</td>
</tr>
<tr>
<td>is_verified</td>
<td>boolean</td>
<td>Whether or not the user has agreed to Arbiter&rsquo;s Terms of Service</td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>If the user has set their username. Defaults to <code class="prettyprint">anonymous</code></td>
</tr>
</tbody></table>

<p><aside class='warning'>
    Be sure to keep your users&#39; tokens secret. They are used for authentication and should be treated like a password.
</aside></p>

<h1 id="wallet-api">Wallet API</h1>

<h2 id="details">Details</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># id and token returned from the user/initialize or user/login call</span>
<span class="c"># IMPORTANT: Keep your users' tokens private</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span>
<span class="n">user_token</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># game API Key from your developer dashboard</span>
<span class="n">api_key</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">user_token</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">api_key</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/wallet/'</span> <span class="o">+</span> <span class="n">user_id</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s">'wallet'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'deposit_address'</span><span class="p">:</span> <span class="s">'1JbbREwe8Vb9DAVzB2zWtNYvKDYLyjyV3C'</span><span class="p">,</span>
        <span class="s">'deposit_address_qr_code'</span><span class="p">:</span> <span class="s">'https://chart.googleapis.com/chart?cht=qr&amp;chl=bitcoin</span><span class="si">%3</span><span class="s">A1JbbREwe8Vb9DAVzB2zWtNYvKDYLyjyV3C&amp;choe=UTF-8&amp;chs=300x300'</span><span class="p">,</span>
        <span class="s">'withdraw_address'</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'50'</span><span class="p">,</span>
        <span class="s">'pending_balance'</span><span class="p">:</span> <span class="s">'623'</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">GET https://www.arbiter.me/api/v1/wallet/&lt;USER ID&gt;</code></p>

<h3 id="returns-a-user&#39;s-wallet-details">Returns a user&rsquo;s Wallet details</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>balance</td>
<td>integer</td>
<td>The amount of Arbiter credits this user has available to bet with.</td>
</tr>
<tr>
<td>pending_balance</td>
<td>integer</td>
<td>The amount of Arbiter credits that are currently pending confirmation.</td>
</tr>
<tr>
<td>deposit_address</td>
<td>string</td>
<td>Bitcoin deposit address for the user to deposit bitcoin in exchance for Arbiter credits.</td>
</tr>
<tr>
<td>deposit_address_qr_code</td>
<td>url</td>
<td>Image URL to a QR code for depositing Bitcoin.</td>
</tr>
<tr>
<td>withdraw_address</td>
<td>string</td>
<td>If the user has cashed out to a Bitcoin address in the past, we include this value to autopopulate their cash out form</td>
</tr>
</tbody></table>

<h2 id="deposit">Deposit</h2>

<p>You have a few options to choose from for how you want to let your users deposit funds into their wallets. Once you have decided how you want your players to deposit funds, we have 3 different payment options to choose from</p>

<h3 id="in-game-using-bitcoin">In game using Bitcoin</h3>

<p>Once you have queried a user&rsquo;s wallet, display the <code class="prettyprint">wallet.deposit_address</code> or the <code class="prettyprint">wallet.deposit_address_qr_code</code> to the user. Then the user can use any Bitcoin wallet app to deposit Bitcoin to their address. We suggest either polling or including a refresh button for the user to trigger wallet queries after placing a deposit.</p>

<p><aside>
Bitcoin is exchanged at time of deposit and withdraw at <a href="https://coinbase.com/charts">Coinbase&rsquo;s Exchange Rates</a>. We instantly accept $0.50 worth of Bitcoin into the user&rsquo;s wallet at time of deposit. The remaining deposit is moved into the user&rsquo;s <code class="prettyprint">pending_balance</code>. We wait for 2 confirmations from the Bitcoin network before moving the <code class="prettyprint">pending_balance</code> into the user&rsquo;s <code class="prettyprint">balance</code>.
</aside></p>

<h3 id="in-game-using-credit-card">In game using Credit Card</h3>

<p>Documentation coming soon&hellip;</p>

<h3 id="in-game-using-paypal">In game using PayPal</h3>

<p>Documentation coming soon&hellip;</p>

<h3 id="link-them-to-their-web-dashboard">Link them to their web dashboard</h3>

<p>If you don&rsquo;t want to deal with implementing the Deposit API, you can link the user to their <a href="https://www.arbiter.me/dashboard/wallet/">Web Dashboard</a>. However, they will need to create account credentials using the [Claim Account API] in order to login in to their web dashboard.</p>

<h2 id="cash-out">Cash Out</h2>

<p>Docuementation coming soon&hellip;</p>

<h1 id="tournament-api">Tournament API</h1>

<p>Tournaments are the core class handling all the betting interactions between your players. All of your tournaments will follow this flow:</p>

<ol>
<li>Your server requests a  new <code class="prettyprint">Tournament</code> using the <a href="#create">Create API</a>.</li>
<li>Users buy into the <code class="prettyprint">Tournament</code> using the <a href="#add-user">Add User API</a>.</li>
<li>Your players play your game.</li>
<li>Your server reports the winner of the game to the <a href="#report-score">Report Score API</a>.</li>
<li>Arbiter will calculate the transactions fees and release the winnings.</li>
</ol>

<p><aside>
    <strong>If your game has matchmaking enabled:</strong><br>
    Be sure to read <a href="#create-with-matchmaking">Tournament Create With Matchmaking</a>
</aside></p>

<h2 id="create">Create</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># Token is returned from the user/initialize or user/login call</span>
<span class="c"># IMPORTANT: Keep your users' tokens private. Treat these like passwords.</span>
<span class="n">USER_TOKEN</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># game API Key from your developer dashboard</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="c"># Include the user_token requesting the tournament</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">USER_TOKEN</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/tournament/create'</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'buy_in'</span><span class="p">:</span> <span class="mi">100</span>  <span class="c"># Bet size in Arbiter Credits</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="s">'tournament'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
        <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
        <span class="s">'users'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}],</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">POST https://www.arbiter.me/api/v1/tournament/create</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>buy_in</td>
<td>integer</td>
<td>The buy in (aka bet size or entry fee) in Arbiter credits for this tournament.</td>
</tr>
</tbody></table>

<h3 id="returns-the-tournament&#39;s-state">Returns the tournament&rsquo;s state</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique identifier for this tournament.</td>
</tr>
<tr>
<td>buy_in</td>
<td>string</td>
<td>The buy in (aka bet size) in Arbiter credits for this tournament.</td>
</tr>
<tr>
<td>balance</td>
<td>string</td>
<td>The current balance of this tournament.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Array of dictionaries of each user that has successfully bought in to this tournament. Each dictionary has the user&rsquo;s ID and the score reported by your server for each user in this tournament.</td>
</tr>
</tbody></table>

<h2 id="create-with-matchmaking-enabled">Create with Matchmaking Enabled</h2>
<pre class="highlight python"><span class="c"># Example success response from Create when matchmaking is enabled</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://www.arbiter.me/api/v1/tournament/create'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span>
<span class="c"># 200</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span>
<span class="p">}</span>
</pre>

<p>Matchmaking keeps the really good users from ruining new users&#39; first game experiences. When matchmaking is enabled for your game, the <a href="#create">Tournament Create API</a> may take a couple seconds to find an accurate match. Because of this delay, we return a success response for the request immediately then create the tournament in the background.</p>

<p>After a client successfully requested a new tournament, the client should pull the <a href="#list">Tournament List API</a> until a new tournament is returned.</p>
<pre class="highlight python"><span class="c"># Example list response when pulling</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://www.arbiter.me/api/v1/tournament'</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">'tournaments'</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
            <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
            <span class="s">'balance'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
            <span class="s">'users'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}],</span>
            <span class="s">'matched_users'</span><span class="p">:</span> <span class="p">[</span><span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'efc4654a2b9844589a8d77d09628afbf'</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre>

<h3 id="fields-on-tournament-with-matchmaking-enabled">Fields on Tournament with Matchmaking Enabled</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>matched_users</td>
<td>array</td>
<td>User IDs of recently active users of similar skills.</td>
</tr>
</tbody></table>

<p>Use the IDs in <code class="prettyprint">matched_users</code> to notify the corresponding user that they have been matched. In the notification, that user should have a <em>Buy-in to Tournament</em> prompt that triggers the <a href="#add-user">Add User API</a> for that user.</p>

<h2 id="details">Details</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># Token is returned from the user/initialize or user/login call</span>
<span class="n">USER_TOKEN</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># game API Key from your developer dashboard</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="c"># Include the token of the User requesting the tournament</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">USER_TOKEN</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/tournament/&lt;TOURNAMENT_ID&gt;'</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="s">'tournament'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
        <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
        <span class="s">'users'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">GET https://www.arbiter.me/api/v1/tournament/&lt;TOURNAMENT_ID&gt;</code></p>

<h3 id="returns-the-tournaments&#39;s-state">Returns the tournaments&rsquo;s state</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique identifier for this tournament.</td>
</tr>
<tr>
<td>buy_in</td>
<td>string</td>
<td>The buy in (aka bet size) in Arbiter credits for this tournament.</td>
</tr>
<tr>
<td>balance</td>
<td>string</td>
<td>The current balance of this tournament.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Array of dictionaries of each user that has successfully bought in to this tournament. Each dictionary has the user&rsquo;s ID and the score reported by your server for each user in this tournament.</td>
</tr>
</tbody></table>

<h2 id="list">List</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># Token is returned from the user/initialize or user/login call</span>
<span class="n">USER_TOKEN</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># game API Key from your developer dashboard</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="c"># Include the token of the User requesting the tournament</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">USER_TOKEN</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">API_KEY</span>
<span class="p">}</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/tournament'</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="s">'tournaments'</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
            <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
            <span class="s">'balance'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
            <span class="s">'users'</span><span class="p">:</span> <span class="p">[{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">GET https://www.arbiter.me/api/v1/tournament</code></p>

<h3 id="optional-url-params">Optional URL Params</h3>

<table><thead>
<tr>
<th>Param</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>1</td>
<td>Depth of paginated results</td>
</tr>
</tbody></table>

<h3 id="returns-paginated-list">Returns paginated list</h3>

<p>TODO: Replace these with the fields to returned in paginated serializer</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique identifier for this tournament.</td>
</tr>
<tr>
<td>buy_in</td>
<td>string</td>
<td>The buy in (aka bet size) in Arbiter credits for this tournament.</td>
</tr>
<tr>
<td>balance</td>
<td>string</td>
<td>The current balance of this tournament.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Array of dictionaries of each user that has successfully bought in to this tournament. Each dictionary has the user&rsquo;s ID and the score reported by your server for each user in this tournament.</td>
</tr>
</tbody></table>

<h2 id="add-user">Add User</h2>

<blockquote>
<p>Before adding a user, create a tournament using the Tournament Create API and save the tournament&rsquo;s ID</p>
</blockquote>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># The user's token is returned from the user/initialize or user/login call</span>
<span class="n">USER_TOKEN</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># game API Key from your developer dashboard</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="c"># Include the user_token requesting the tournament</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">USER_TOKEN</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/tournament/&lt;TOURNAMENT_ID&gt;/add-user/&lt;USER_ID&gt;'</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="s">'tournament'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
        <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'200'</span><span class="p">,</span>
        <span class="s">'users'</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'efc4654a2b9844589a8d77d09628afbf'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>Transfers the tournament&rsquo;s buy_in amount from the specified user&rsquo;s wallet to the specified tournament. If no errors occur, then the user will be added to the <code class="prettyprint">users</code> array and the <code class="prettyprint">tournament.balance</code> will be updated.</p>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">POST https://www.arbiter.me/api/v1/tournament/&lt;TOURNAMENT_ID&gt;/add-user/&lt;USER_ID&gt;</code></p>

<h3 id="returns-the-jackpot-state">Returns the Jackpot State</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique identifier for this tournament.</td>
</tr>
<tr>
<td>buy_in</td>
<td>string</td>
<td>The buy in (aka bet size) in Arbiter credits for this tournament.</td>
</tr>
<tr>
<td>balance</td>
<td>string</td>
<td>The current balance of this tournament.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Array of dictionaries of each user that has successfully bought in to this tournament. Each dictionary has the user&rsquo;s ID and the score reported by your server for each user in this tournament.</td>
</tr>
</tbody></table>

<h2 id="report-score">Report Score</h2>

<blockquote>
<p>Before reporting a score, create a tournament using the Tournament Create API add users to the tournament using the Add User API</p>
</blockquote>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="c"># User tokens are returned in the user/initialize or user/login call</span>
<span class="c"># IMPORTANT: Keep your users' tokens private</span>
<span class="n">USER_TOKEN</span> <span class="o">=</span> <span class="s">'3d2fcd21dcd22ae1d64b799c486a959aeee42fbb'</span>

<span class="c"># game API Key from your developer dashboard</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'d6416b1e9be84c53b07524e37f94499d'</span>

<span class="c"># Include the user_token requesting the tournament</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Token '</span> <span class="o">+</span> <span class="n">USER_TOKEN</span> <span class="o">+</span> <span class="s">'::'</span> <span class="o">+</span> <span class="n">API_KEY</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/tournament/&lt;TOURNAMENT_ID&gt;/report-score/&lt;USER_ID&gt;'</span>
<span class="n">payload</span><span class="o">=</span><span class="p">{</span>
    <span class="s">'score'</span><span class="p">:</span> <span class="s">'101'</span>
<span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="c"># If all users have reported a score, the tournament will automatically payout</span>
<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="s">'tournament'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
        <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'0'</span><span class="p">,</span>
        <span class="s">'users'</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="s">'101'</span><span class="p">},</span>
            <span class="p">{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'efc4654a2b9844589a8d77d09628afbf'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>Once a user has finished playing your game, report their score to Arbiter. Once all the users have reported their scores, Arbiter will compare the scores and set the winner to the user with the highest score. Once a winner has been set, Arbiter will automatically calculate the transaction fees and transfer the remainder of the tournament balance to the winning user&rsquo;s Arbiter wallet.</p>

<h3 id="request-url">Request URL</h3>

<p><code class="prettyprint">POST https://www.arbiter.me/api/v1/tournament/&lt;TOURNAMENT_ID&gt;/report-score/&lt;USER_ID&gt;</code></p>

<h3 id="request-parameters">Request Parameters</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>score</td>
<td>integer</td>
<td>The score of the user for this tournament.</td>
</tr>
</tbody></table>

<h3 id="returns-the-tournament&#39;s-state">Returns the tournament&rsquo;s State</h3>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td>Unique identifier for this tournament.</td>
</tr>
<tr>
<td>buy_in</td>
<td>string</td>
<td>The buy in (aka bet size) in Arbiter credits for this tournament.</td>
</tr>
<tr>
<td>balance</td>
<td>string</td>
<td>The current balance of this tournament. If all users have reported their score, this will be 0.</td>
</tr>
<tr>
<td>users</td>
<td>array</td>
<td>Array of dictionaries of each user that has successfully bought in to this tournament. Each dictionary has the user&rsquo;s ID and the score reported by your server for each user in this tournament.</td>
</tr>
</tbody></table>

<h1 id="matchmaking">Matchmaking</h1>

<p>The Arbiter matchmaking service keeps the good players from ruining new players experiences. When you turn on matchmaking for your game, Arbiter will automatically find an accurate match for a user whenever they request a new Tournament.</p>

<h2 id="enable-matchmaking">Enable Matchmaking</h2>

<p>This is the easiest way to enable matchmaking in your game.</p>

<ol>
<li>Go to games tab in your <a href="https://www.arbiter.me/dashboard/games/">Developer Dashboard</a></li>
<li>Click <em>edit</em> for the game you want to enable matchmaking on.</li>
<li>Check the <em>Enable Matchmaking</em> box in the configuration form.</li>
<li>Click <em>save</em>.</li>
</ol>

<p>Then whenever you make a call to the <a href="#create">Tournement Create API</a>, a new <strong>matched_users</strong> field will be included in the <code class="prettyprint">Tournament</code> object from the <a href="#details">Tournament Details API</a>.</p>

<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>matched_users</td>
<td>array</td>
<td>An array of <code class="prettyprint">user.id</code>&rsquo;s that have been matched based on the users&#39; skill.</td>
</tr>
</tbody></table>

<h2 id="override-in-api">Override in API</h2>
<pre class="highlight python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'users'</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
        <span class="p">{</span><span class="s">'id'</span><span class="p">:</span> <span class="s">'efc4654a2b9844589a8d77d09628afbf'</span><span class="p">,</span> <span class="s">'score'</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="s">'buy_in'</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://www.arbiter.me/api/v1/tournament/create'</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="p">{</span>
    <span class="s">'success'</span><span class="p">:</span> <span class="bp">True</span>
    <span class="s">'tournament'</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">'id'</span><span class="p">:</span> <span class="s">'7b62cac5dd164104955468ff80ee6d26'</span>
        <span class="s">'buy_in'</span><span class="p">:</span> <span class="s">'100'</span><span class="p">,</span>
        <span class="s">'balance'</span><span class="p">:</span> <span class="s">'0'</span><span class="p">,</span>
        <span class="s">'users'</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s">'matched_users'</span><span class="p">:</span> <span class="p">[</span><span class="s">'d8b50f95c8a24f24a7c64c9d3d5dde5f'</span><span class="p">,</span> <span class="s">'efc4654a2b9844589a8d77d09628afbf'</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>There may be edge case scenarios where you do not want to use matchmaking for all tournaments in your game. For example, challenging a friend through Facebook. Even if matchmaking is enabled for a game, including a <code class="prettyprint">users</code> array in the <a href="#create">Tournament Create API</a> will disable matchmaking. The tournament will be created with the matched users equal to <code class="prettyprint">users</code> and return a new tournament back in the response.</p>

<h1 id="unity-ios-sdk">Unity iOS SDK</h1>

<p>We have a Unity SDK for speeding up the integration when building a game in Unity for iOS. This package wraps all the API interaction into a single Arbiter class.</p>

<h2 id="sdk-flow-overview">SDK Flow Overview</h2>

<p>Below is an outline of the typical flow a user should be taken through when playing an Arbiter enabled game followed by detailed descriptions and code examples of each step. Don&rsquo;t hesitate to message us if you have any questions or issues. <a href="mailto:support@arbiter.me">support@arbiter.me</a></p>

<h3 id="implementation-prerequisites">Implementation Prerequisites</h3>

<p>Complete these steps before writing any code.</p>

<ol>
<li><a href="#configure-your-game">Configure your game</a> in your developer dashboard.</li>
<li><a href="https://github.com/ArbiterGames/Unity-SDK">Download the Unity Package</a>.</li>
<li>Import the package into your Unity game.</li>
<li>Add the Arbiter Prefab located in <code class="prettyprint">/Assets/Plugins/Arbiter</code> to your loading scene.</li>
<li>Set your game&rsquo;s API key and your developer access token in the Arbiter Game Object&rsquo;s inspector.</li>
</ol>

<h3 id="standard-flow-for-your-users">Standard flow for your users</h3>

<p>Each step below is done with a call to the Arbiter SDK.</p>

<ol>
<li>Authenticate a user session.</li>
<li>Verify the user&rsquo;s age and location (<em>if this is a new session</em>).</li>
<li>Display the user&rsquo;s wallet details.</li>
<li>Prompt the user to deposit Arbiter credits.</li>
<li>Have the user join a tournament.</li>
<li>Report the user&rsquo;s score for that tournament.</li>
<li>View previous tournament results.</li>
<li>Let the user withdraw their credits when they are done.</li>
<li>Logout</li>
</ol>

<h3 id="quick-and-easy-implementation">Quick and Easy Implementation</h3>

<p>The SDK includes iOS UIAlertViews for all the Arbiter UI elements (wallet dashboard screen, previous tournaments, deposits / withdraws, etc). This is the quickest way to integrate Arbiter into your game. Once you have added the Arbiter Game Object to your game, you can start making calls to the SDK and iOS UIAlertViews will automatically be displayed to the user with all the available user inputs in the UIAlertView.</p>

<h3 id="customized-ui-implementation">Customized UI Implementation</h3>

<p>The alternative implementation is for you to create your own custom UI elements that matches your game&rsquo;s look and feel. As you build out your UI elements, you can bind your buttons directly to the Arbiter SDK methods instead of relying on the pre-built UIAlertView inputs.</p>

<h2 id="the-arbiter-game-object">The Arbiter Game Object</h2>

<p>Once the Arbiter Game Object has been added to your loading scene, you will have access to the <code class="prettyprint">Arbiter</code> Class. This class contains all the properties and methods that you will interact with throughout the implementation.</p>

<h3 id="properties">Properties</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>IsAuthenticated</td>
<td><code class="prettyprint">bool</code></td>
<td>Whether or not there is a currently authenticated session between the device and the Arbiter server.</td>
</tr>
<tr>
<td>Verified</td>
<td><code class="prettyprint">bool</code></td>
<td>Will return <code class="prettyprint">true</code> only if the user has agreed to the <a href="https://www.arbiter.me/terms/">Terms and Conditions</a> AND their location has been approved for you game.</td>
</tr>
<tr>
<td>LocationApproved</td>
<td><code class="prettyprint">bool</code></td>
<td>Whether or not the user&rsquo;s location has been approved for betting in your game.</td>
</tr>
<tr>
<td>AgreedToTerms</td>
<td><code class="prettyprint">bool</code></td>
<td>Whether or not the user has agreed to the <a href="https://www.arbiter.me/terms/">Terms and Conditions</a></td>
</tr>
<tr>
<td>UserId</td>
<td><code class="prettyprint">string</code></td>
<td>The user&rsquo;s unique identifier on Arbiter.</td>
</tr>
<tr>
<td>Username</td>
<td><code class="prettyprint">string</code></td>
<td>The username or email associated with the current Arbiter account.</td>
</tr>
<tr>
<td>AccessToken</td>
<td><code class="prettyprint">string</code></td>
<td>The access token for this user to make authenticated requests to the Arbiter server.</td>
</tr>
<tr>
<td>Balance</td>
<td><code class="prettyprint">string</code></td>
<td>The currently available Arbiter credits for this user to bet with.</td>
</tr>
<tr>
<td>PendingBalance</td>
<td><code class="prettyprint">string</code></td>
<td>Any pending Arbiter credits in the user&rsquo;s wallet.</td>
</tr>
<tr>
<td>DepositAddress</td>
<td><code class="prettyprint">string</code></td>
<td>Bitcoin address for purchasing Arbiter credits with Bitcoin</td>
</tr>
<tr>
<td>DepositQrCode</td>
<td><code class="prettyprint">string</code></td>
<td>URL to a QR code for purchasing Arbiter credits with Bitcoin</td>
</tr>
<tr>
<td>WithdrawAddress</td>
<td><code class="prettyprint">string</code></td>
<td>If the user has withdrawn Arbiter credits to a Bitcoin address, this field have their most recently used withdraw address.</td>
</tr>
</tbody></table>

<h3 id="methods">Methods</h3>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>LoginAsAnonymous</td>
<td>This will create an anonymous session for the user. The session will persist until they either reset their saved data or user the <code class="prettyprint">Logout</code> call.</td>
</tr>
<tr>
<td>LoginWithGameCenter</td>
<td>If the user has already logged into your game using Apple&rsquo;s Game Center, this will link the Game Center user with an Arbiter account.</td>
</tr>
<tr>
<td>LoginWithAccessToken <code class="prettyprint">Coming soon</code></td>
<td>Establishes a new session for an existing user based on an access token.</td>
</tr>
<tr>
<td>Login</td>
<td>Displays a native UIAlertView for a user to login to an existing Arbiter account.</td>
</tr>
<tr>
<td>Logout</td>
<td>Destroys the current Arbiter session.</td>
</tr>
<tr>
<td>VerifyUser</td>
<td>Prompts the user to agree to the <a href="https://www.arbiter.me/terms/">Terms and Conditions</a> and verifies that your game is legal to bet on in their local jurisdiction.</td>
</tr>
<tr>
<td>GetWallet</td>
<td>Updates <code class="prettyprint">Arbiter.Balance</code> and <code class="prettyprint">Arbiter.PendingBalance</code>.</td>
</tr>
<tr>
<td>DisplayWalletDashboard</td>
<td>Updates Arbiter.Wallet then displays the wallet details in a native UIAlertView along with user inputs such as Deposit and Withdraw.</td>
</tr>
<tr>
<td>DisplayDepositFlow</td>
<td>Displays native UIAlertViews that take the user through the checkout process for puchasing Arbiter credits.</td>
</tr>
<tr>
<td>DisplayWithdrawFlow</td>
<td>Displays native UIAlertViews that take the user through the checkout process for redeeming Arbiter credits.</td>
</tr>
<tr>
<td>JoinTournament</td>
<td>Enters the user in a new tournament.</td>
</tr>
<tr>
<td>ReportScore</td>
<td>Reports the outcome of a tournament for the current user.</td>
</tr>
<tr>
<td>GetTournaments</td>
<td>Returns a paginated list of a user&rsquo;s previous tournaments.</td>
</tr>
<tr>
<td>DisplayPreviousTournaments</td>
<td>Displays the the paginated list of previous tournaments in a native UIAlertView.</td>
</tr>
</tbody></table>

<h2 id="login-as-anonymous">Login As Anonymous</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">LoginButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">LoginAsAnonymous</span><span class="p">(</span>  <span class="n">Callback</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Will print "Hello, anonymous!"
</span>        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Hello, "</span> <span class="p">+</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Username</span> <span class="p">+</span> <span class="s">"!"</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>This will create an anonymous session for the user. The session will persist until they either reset their saved data or user the <code class="prettyprint">Logout</code> call.</p>

<p>This will give a user most of the functionality as <code class="prettyprint">LoginWithGameCenter</code> and <code class="prettyprint">Login</code>, except when they want to Withdraw. Due to money laundering regulations, we cannot permit withdrawing until we gather some extra info from the user. When an anonymous user attempts to make a withdraw, they will be prompted to create a full account. After doing so, they will then be able to log back into that account using the <code class="prettyprint">Login</code> method.</p>

<h2 id="login-with-game-center">Login with Game Center</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">AnyScriptPriorToBetting</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span> <span class="p">{</span>
<span class="cp">#if UNITY_IOS
</span>        <span class="n">Action</span><span class="p">&lt;</span><span class="kt">bool</span><span class="p">&gt;</span> <span class="n">processAuth</span> <span class="p">=</span> <span class="p">(</span> <span class="n">success</span> <span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span> <span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
                <span class="n">Arbiter</span><span class="p">.</span><span class="nf">LoginWithGameCenter</span><span class="p">(</span> <span class="n">Callback</span> <span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span> <span class="s">"Could not authenticate to Game Center!"</span> <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="n">Social</span><span class="p">.</span><span class="n">localUser</span><span class="p">.</span><span class="nf">Authenticate</span><span class="p">(</span> <span class="n">processAuth</span> <span class="p">);</span>
<span class="cp">#endif
</span>    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Hello, "</span> <span class="p">+</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Username</span> <span class="p">+</span> <span class="s">"!"</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>If your game is setup to integrate with Game Center, a user can connect their Arbiter account with a Game Center account.</p>

<p>Once their Arbiter account has been connected to a Game Center account, they can use their Game Center credentials to establish a new session with their existing Arbiter Wallet in other Arbiter enabled games as well as on other devices.</p>

<p>To connect with a Game Center account, use Unity&rsquo;s <a href="http://docs.unity3d.com/ScriptReference/Social.html">Social API</a> to get a Game Center <a href="http://docs.unity3d.com/ScriptReference/Social-localUser.html">LocalUser</a>. Once a LocalUser has been created, call <code class="prettyprint">Arbiter.LoginWithGameCenter()</code> to connect their Game Center account with Arbiter.</p>

<h2 id="login-with-username-/-password">Login with Username / Password</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">LoginButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">Login</span><span class="p">(</span>  <span class="n">Callback</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Hello, "</span> <span class="p">+</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Username</span> <span class="p">+</span> <span class="s">"!"</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>If a user has already created an account through the <a href="https://www.arbiter.me/player-registration">Web Registration</a> or through the <code class="prettyprint">claim_account_url</code>, they can re-establish an existing session using the <code class="prettyprint">Arbiter.Login()</code>. This call will display a UIAlertView with an email and password field. Upon successful login, all the <code class="prettyprint">Arbiter</code> properties will get set with the correct values.</p>

<h2 id="login-with-access-token">Login With Access Token</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">Entrypoint</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">private</span> <span class="k">static</span> <span class="kt">string</span> <span class="n">accessToken</span> <span class="p">=</span> <span class="n">TOKEN_FROM_YOUR_DATABASE_SAVED_FROM_PREVIOUS_SESSION</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span> <span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">LoginWithAccessToken</span><span class="p">(</span> <span class="n">accessToken</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Hello, "</span> <span class="p">+</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Username</span> <span class="p">+</span> <span class="s">"!"</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p><code class="prettyprint">Coming Soon...</code></p>

<p>If your game already has user authentication on your server, your users do not have to create new Arbiter account credentials.</p>

<p>The first time a user loads your game, call <code class="prettyprint">Arbiter.Initialize()</code> to create a new session on Arbiter. This will set <code class="prettyprint">Arbiter.AccessToken</code> to a string that can be used for authenticated requests for this user. Save that token with the user in your database. Then, whenever one of your users re-loads your game, call <code class="prettyprint">Arbiter.LoginWithAccessToken( accessToken )</code> to re-establish a session with the correct Arbiter account for that user.</p>

<p><aside class="warning">
    <strong>Keep your users&#39; access tokens private</strong><br>
    Be sure that you are only sending the tokens over https and that you are storing them encypted in your database. Getting access to a user&rsquo;s token is equivalent to getting access to their username and password.
</aside></p>

<h2 id="verify-the-user">Verify The User</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">AnyScriptPriorToBetting</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">VerificationStep</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">VerifyUser</span><span class="p">(</span>  <span class="n">Callback</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Username</span> <span class="p">+</span> <span class="s">" is now verified: "</span> <span class="p">+</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Verified</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>Whenever a new user is created, in addition to having the user agree to the standard terms and conditions, we need to make sure there are no local regulations restricting them from being able to bet in your game.</p>

<p><strong>This method will:</strong></p>

<ol>
<li>Prompt the user to enable location services (if not already enabled).</li>
<li>Prompt the user to agree to the <a href="https://www.arbiter.me/terms">Terms and Conditions</a>.</li>
<li>Send the user&rsquo;s postal code to the Arbiter server to check the legality of online betting in their location.</li>
</ol>

<h2 id="get-wallet">Get Wallet</h2>
<pre class="highlight csharp"><span class="c1">// Setup wallet listeners
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">SetupWalletHandlerScript</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">AddWalletListener</span><span class="p">(</span>  <span class="n">UpdateWalletUIElements</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">UpdateWalletUIElements</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Balance: "</span> <span class="p">+</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Balance</span> <span class="p">);</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Pending Balance: "</span> <span class="p">+</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">PendingBalance</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">ExampleOfRemovingWalletListener</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">RemoveWalletListener</span><span class="p">(</span> <span class="n">UpdateWalletUIElements</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Bind to a refresh button in your game
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">RefreshWalletButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">GetWallet</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>In addition to updating <code class="prettyprint">Arbiter.Balance</code>, you can also setup wallet listeners. This way, whenever the wallet is updated, you can bind your own handlers for updating you UI elements and such.</p>

<p>Calling <code class="prettyprint">Arbiter.GetWallet()</code> will request the latest wallet detials from the server and then setup automatic polling at incrementing intervals. Anytime you call <code class="prettyprint">Arbiter.GetWallet()</code> the polling intervals will reset the inrements.</p>

<h3 id="save-time-and-use-our-wallet-dashboard">Save time and use our Wallet Dashboard</h3>
<pre class="highlight csharp"><span class="c1">// Bind to a 'Show Wallet' button in your UI
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">DisplayWalletButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">DisplayWalletDashboard</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>To save on implementation time, you can use <code class="prettyprint">Arbiter.DisplayWalletDashboard()</code> to give your users access to their wallets. This will display all their wallet info in a native UIAlertView with inputs for depositing and withdrawing.</p>

<h2 id="deposit-credits">Deposit Credits</h2>
<pre class="highlight csharp"><span class="c1">// Bind to a 'Deposit Credits' button in your UI
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">DepositCreditsButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>
    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">DisplayDepositFlow</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>Before a user can start betting, they will need Arbiter credits. Arbiter credits are the betting currency that users will use to bet in your game. Feel free to call them credits, cents, gold, gems, or whatever makes sense for your game.</p>

<p><code class="prettyprint">1 Arbiter credit = $0.01 USD</code></p>

<p>Use <code class="prettyprint">Arbiter.DisplayDepositFlow()</code> to display a native UIAlertView for purchasing Arbiter credits. If you are using <code class="prettyprint">Arbiter.DisplayWalletDashboard()</code>, there is a <code class="prettyprint">Deposit</code> button in the wallet dashboard for users to purchase Arbiter credits.</p>

<h2 id="join-a-tournament">Join a Tournament</h2>
<pre class="highlight csharp"><span class="c1">// Bind to a 'Join Tournament' button in your UI
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">JoinTournamentButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="kt">string</span> <span class="n">betSize</span> <span class="p">=</span> <span class="s">"100"</span><span class="p">;</span>
        <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">filters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;();</span>
        <span class="n">filters</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span> <span class="s">"arbitrary_key"</span><span class="p">,</span> <span class="s">"the_value"</span> <span class="p">);</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">JoinTournament</span><span class="p">(</span> <span class="n">betSize</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">Callback</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">(</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Tournament</span> <span class="n">tournament</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Have the user actually play your game and user Arbiter.ReportScore() to report the outcome.
</span>        <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Joined tournament: "</span> <span class="p">+</span> <span class="n">tournament</span><span class="p">.</span><span class="n">Id</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>Now that the user has credits to bet with, they can request to join tournaments. If there are no current tournaments for the user to join, a new tournament will get created. Once the new tournament has been created on the server and is available on the device, load the actually game play scene for the user.</p>

<h3 id="the-tournament-object">The Tournament Object</h3>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Id</td>
<td><code class="prettyprint">string</code></td>
<td>Unique identifier for a tournament</td>
</tr>
<tr>
<td>Status</td>
<td><code class="prettyprint">string</code></td>
<td><code class="prettyprint">Initializing</code> The tournament has been created, but is still waiting for all the users to join.<br><code class="prettyprint">Inprogress</code> All the users have joined, but not all users have reported their scores.<br><code class="prettyprint">Complete</code> All users have reported their scores and the tournament has a winner.</td>
</tr>
<tr>
<td>Users</td>
<td><code class="prettyprint">List&lt;Arbiter.TournamentUser&gt;</code></td>
<td>A List of Arbiter users that have joined this tournament. Each user includes the user&rsquo;s <code class="prettyprint">UserId</code> and a <code class="prettyprint">Score</code> for this tournament (if they have reported a score yet).</td>
</tr>
<tr>
<td>Winner</td>
<td><code class="prettyprint">Arbiter.TournamentUser</code></td>
<td>The winner of this tournament.</td>
</tr>
</tbody></table>

<p><aside class="important">
    <strong>Once a user has requested a tournament, the credits will automatically get transferred from the user&rsquo;s wallet to the tournament pot</strong>.
</aside></p>

<h3 id="using-tournament-filters">Using Tournament Filters</h3>
<pre class="highlight csharp"><span class="kt">string</span> <span class="n">betSize</span> <span class="p">=</span> <span class="s">"100"</span><span class="p">;</span>
<span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;</span> <span class="n">filters</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Dictionary</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="kt">string</span><span class="p">&gt;();</span>
<span class="n">filters</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span> <span class="s">"arbitrary_key"</span><span class="p">,</span> <span class="s">"the_value"</span> <span class="p">);</span>
<span class="n">Arbiter</span><span class="p">.</span><span class="nf">JoinTournament</span><span class="p">(</span> <span class="n">betSize</span><span class="p">,</span> <span class="n">filters</span><span class="p">,</span> <span class="n">Callback</span> <span class="p">);</span>
</pre>

<p>You can pass in a <code class="prettyprint">filters</code> dictionary to sort tournaments into different groups. For example, if you want to create a tournament where the users are competing on level 2 of your game, you can set the filters to <code class="prettyprint">{&quot;level&quot;: &quot;2&quot;}</code>. This will make sure that when a user playing level 2 requests a tournament, they will only get matched with other users requesting a tournament for level 2 (rather than level 1 or 3). <code class="prettyprint">level</code> is just an arbitrary example, this can be set to any string.</p>

<h2 id="report-score">Report Score</h2>
<pre class="highlight csharp"><span class="c1">// Put add these functions on any script that runs at the end of a user playing your game
</span><span class="k">public</span> <span class="k">class</span> <span class="nc">EndOfGameScript</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="c1">// Save the tournament during the JoinTournament callback
</span>    <span class="n">Arbiter</span><span class="p">.</span><span class="n">Tournament</span> <span class="n">currentTournament</span> <span class="p">=</span> <span class="n">tournament</span><span class="p">;</span>

    <span class="c1">// Get the players score after playing your game
</span>    <span class="kt">int</span> <span class="n">score</span> <span class="p">=</span> <span class="m">101</span><span class="p">;</span>

    <span class="c1">// Called at the end of a user playing your game
</span>    <span class="k">void</span> <span class="nf">HandleUserFinishingGame</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">ReportScore</span><span class="p">(</span> <span class="n">currentTournament</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">score</span><span class="p">,</span> <span class="n">Callback</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">(</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">Tournament</span> <span class="n">tournament</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="n">tournament</span><span class="p">.</span><span class="n">Status</span> <span class="p">==</span> <span class="s">"Complete"</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">tournament</span><span class="p">.</span><span class="n">Winner</span><span class="p">.</span><span class="n">Id</span> <span class="p">==</span> <span class="n">Arbiter</span><span class="p">.</span><span class="n">UserId</span> <span class="p">)</span> <span class="p">{</span>
                <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"You won!"</span> <span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"User "</span> <span class="n">tournament</span><span class="p">.</span><span class="n">Winner</span><span class="p">.</span><span class="n">Id</span> <span class="p">+</span> <span class="s">" won with a score of "</span> <span class="p">+</span> <span class="n">tournament</span><span class="p">.</span><span class="n">Winner</span><span class="p">.</span><span class="n">Score</span> <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">Log</span><span class="p">(</span> <span class="s">"Waiting for the other users to finish playing."</span> <span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>After the user has successfully played the game and has generated a numeric score, send the score to the Arbiter server. Once all users in this tournament have reported their scores to the Arbiter server, we will determine the winner based on which user reported the highest score and distribute the credits to the winner&rsquo;s wallet.</p>

<h2 id="display-previous-tournaments">Display Previous Tournaments</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">ViewPreviousTournamentsButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">DisplayPreviousTournaments</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>This displays a paginated list of tournaments this user has joined in a native UIAlertView.</p>

<h2 id="withdraw-credits">Withdraw Credits</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">WithdrawCreditsButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">DisplayWithdrawFlow</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>

<p>Once the user is ready convert their Arbiter credits back to USD, call this method to display the withdraw checkout flow. The flow is presented in a native UIAlertView and prompts the user to enter their Debit Card info for the card they want to redeem to.</p>

<p>If you are using <code class="prettyprint">Arbiter.DisplayWalletDashboard()</code>, then the withdraw flow is already accesible through the native UIAlertView that is displayed  from the <code class="prettyprint">DisplayWalletDashboard()</code> call.</p>

<p><aside class="important">
    Withdraws can only be made to debit or bank cards. Our payment processor is unable to approve withdraws made to credit cards.
</aside></p>

<h2 id="logout">Logout</h2>
<pre class="highlight csharp"><span class="k">public</span> <span class="k">class</span> <span class="nc">LogoutButton</span> <span class="p">:</span> <span class="n">MonoBehaviour</span> <span class="p">{</span>

    <span class="k">void</span> <span class="nf">OnMouseUpAsButton</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Arbiter</span><span class="p">.</span><span class="nf">Logout</span><span class="p">(</span> <span class="n">Callback</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">Callback</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Update your UI to display the Login / Initialize flow
</span>    <span class="p">}</span>

<span class="p">}</span>
</pre>

<p>This call will reset all the properties on the <code class="prettyprint">Arbiter</code> class and end the current session.</p>

      </div>
      <div class="dark-box">
          <div id="lang-selector">
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="csharp">csharp</a>
          </div>
      </div>
    </div>
  </body>
</html>
